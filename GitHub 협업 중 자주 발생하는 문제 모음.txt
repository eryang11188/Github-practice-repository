[Git/GitHub 최초 시작 + 협업 시 자주 발생하는 문제 & 해결법 — 최종본]

────────────────────────────────────────
1. GitHub 저장소 생성 → 로컬 clone
────────────────────────────────────────
GitHub에서 animal-game 저장소 생성 후 로컬에서:

git clone https://github.com/eryang/animal-game.git
cd animal-game

로컬에는 main 브랜치만 존재.


────────────────────────────────────────
2. 기능 개발을 위한 브랜치 생성
────────────────────────────────────────
main에서 직접 작업 금지. 새로운 기능은 feature 브랜치에서 진행.

git checkout -b feature/jump origin/main

= 원격 main의 최신 상태를 기반으로 feature/jump 브랜치 생성 + 이동.


────────────────────────────────────────
3. 코드 작성 → commit
────────────────────────────────────────
파일 수정 후:

git add .
git commit -m "feat: jump 기능 추가"


────────────────────────────────────────
4. 첫 push → 원격에 브랜치 생성
────────────────────────────────────────
git push origin feature/jump

GitHub에 origin/feature/jump 브랜치가 새로 생김.


────────────────────────────────────────
5. GitHub에서 Pull Request(PR) 생성
────────────────────────────────────────
base: main
compare: feature/jump
reviewer 지정
설명 작성 후 PR 생성.


────────────────────────────────────────
6. 코드 리뷰 후 수정 요청이 온 경우
────────────────────────────────────────
코드 수정:

git add .
git commit -m "fix: jumpHeight 조정 가능하도록 수정"
git push origin feature/jump

PR이 자동 업데이트됨.


────────────────────────────────────────
7. PR 승인 → merge
────────────────────────────────────────
GitHub에서 “Squash and merge” 또는 팀 규칙에 맞는 방식으로 merge.


────────────────────────────────────────
8. 원격 브랜치 삭제
────────────────────────────────────────
PR 화면 → Delete branch 버튼 클릭.


────────────────────────────────────────
9. 로컬 브랜치 삭제 및 정리
────────────────────────────────────────
git checkout main
git pull origin main
git branch -d feature/jump
git fetch --prune


────────────────────────────────────────
10. 다음 기능 개발 시작
────────────────────────────────────────
다음 기능은 다시 main을 기반으로 브랜치 생성:

git checkout -b feature/move origin/main



================================================================================
   협업 때 자주 발생하는 문제들 + 원인 + 해결법 (실전 필수)
================================================================================


────────────────────────────────────────
문제 ①: push rejected (non-fast-forward)
────────────────────────────────────────
상황:
팀원이 먼저 feature/jump에 push함 → 내가 push하려고 하면 거절됨.

원인:
원격 브랜치가 내 로컬보다 앞서 있기 때문.

해결법 A (merge 방식):
git pull origin feature/jump
# 충돌 해결 후
git push origin feature/jump

해결법 B (rebase 방식 → 일반적으로 더 깔끔):
git pull --rebase origin feature/jump
git push origin feature/jump --force-with-lease


────────────────────────────────────────
문제 ②: pull하려는데 내 수정 내용 때문에 pull 거절됨
────────────────────────────────────────
Git 메시지:
"Your local changes would be overwritten by merge"

원인:
Git은 절대 내 로컬 파일을 자동으로 덮어쓰지 않기 때문에 pull 자체를 차단.

해결법 A: 먼저 commit
git add .
git commit -m "WIP"
git pull origin feature/jump

해결법 B: commit하기 싫으면 stash
git stash
git pull origin feature/jump
git stash pop


────────────────────────────────────────
문제 ③: merge 충돌 발생
────────────────────────────────────────
충돌 표시:
<<<<<<< HEAD
(원격 코드)
=======
(내 코드)
>>>>>>> 브랜치명

해결:
1) 원하는 코드만 남기고 모든 충돌 표시 삭제
2) 저장
3) git add .
4) git commit
5) git push origin feature/jump


────────────────────────────────────────
문제 ④: main이 계속 업데이트되는데 내 feature 브랜치가 오래됨
────────────────────────────────────────
해결법 A: merge 방식
git checkout feature/jump
git merge origin/main

해결법 B: rebase 방식(가장 깔끔)
git checkout feature/jump
git pull --rebase origin main


────────────────────────────────────────
문제 ⑤: 누군가 force push해서 로컬과 원격이 완전히 어긋남
────────────────────────────────────────
오류 메시지:
non-fast-forward

해결 (원격으로 강제 동기화):
git fetch --all
git checkout feature/jump
git reset --hard origin/feature/jump


────────────────────────────────────────
문제 ⑥: 브랜치를 GitHub에서 삭제했는데 git branch -r에 여전히 보임
────────────────────────────────────────
해결:
git fetch --prune


────────────────────────────────────────
문제 ⑦: PR에 base/compare에 브랜치 대신 커밋ID만 뜨는 경우
────────────────────────────────────────
원인:
브랜치가 삭제되었거나 force-push로 히스토리가 크게 변경됨.

해결:
git push origin feature/jump
필요하면 PR을 다시 올림.


────────────────────────────────────────
문제 ⑧: merge commit이 계속 생겨서 히스토리가 지저분해짐
────────────────────────────────────────
해결:
git pull --rebase origin <branch>
또는 GitHub 설정에서 squash merge 사용.


────────────────────────────────────────
문제 ⑨: PR 리뷰어 지정 안 하면 아무나 merge 가능
────────────────────────────────────────
해결:
GitHub → Settings → Branch protection rules
- Require pull request reviews before merging
- Require approvals 설정
- Restrict who can push


────────────────────────────────────────
문제 ⑩: 다른 PR이 먼저 merge돼서 내 PR에서 충돌 발생
────────────────────────────────────────
해결 (내 브랜치를 최신 main 위로 재배치):
git checkout feature/jump
git pull --rebase origin main
# 충돌 해결
git push origin feature/jump --force-with-lease


================================================================================
전체 흐름 요약 (협업 표준)
================================================================================
1. clone
2. feature 브랜치 생성
3. 작업 → commit
4. push
5. PR 생성
6. 리뷰 → 수정 후 push
7. merge
8. 브랜치 삭제
9. 다음 기능 개발 시작

---- 협업 중 발생하는 문제 해결 ----

A. push rejected → pull --rebase  
B. pull 거부 → commit 또는 stash  
C. 충돌 → 해결 후 commit  
D. main 업데이트 → feature 브랜치 rebase  
E. fetch --prune로 브랜치 목록 정리  
F. reset --hard origin/브랜치로 sync  
G. PR 충돌 → 최신 main으로 rebase  

